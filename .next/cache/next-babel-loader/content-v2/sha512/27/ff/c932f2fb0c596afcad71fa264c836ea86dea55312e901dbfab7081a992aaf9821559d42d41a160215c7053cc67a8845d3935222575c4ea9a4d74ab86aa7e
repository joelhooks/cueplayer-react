{"ast":null,"code":"import _defineProperty from \"/Users/joel/Code/joelhooks/cueplayer-react/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/joel/Code/joelhooks/cueplayer-react/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react';\nimport ReactSlider from 'react-slider';\nimport { formatTime } from '../utils/format-time';\nimport Captions from './captions'; // this was just a small experiment but the overall player should have some\n// \"store\" concept\n\nimport { usePlayerStore } from './player';\n\nfunction VolumeSlider(_ref) {\n  var initialVolume = _ref.initialVolume,\n      onVolumeChange = _ref.onVolumeChange;\n\n  var _React$useState = React.useState(initialVolume),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      volume = _React$useState2[0],\n      setVolume = _React$useState2[1];\n\n  return /*#__PURE__*/_jsxs(\"label\", {\n    children: [\"volume\", /*#__PURE__*/_jsx(\"input\", {\n      value: volume,\n      type: \"range\",\n      min: \"0\",\n      max: \"100\",\n      onChange: function onChange(e) {\n        setVolume(Number(e.target.value));\n        onVolumeChange(Number(e.target.value));\n      }\n    })]\n  });\n}\n\nvar Controls = function Controls(_ref2) {\n  var player = _ref2.player,\n      fullscreenElemRef = _ref2.fullscreenElemRef;\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      test = _React$useState4[0],\n      setTest = _React$useState4[1];\n\n  var _React$useState5 = React.useState(30),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      volume = _React$useState6[0],\n      setVolume = _React$useState6[1];\n\n  var currentTime = usePlayerStore(function (state) {\n    return state.currentTime;\n  });\n  var duration = usePlayerStore(function (state) {\n    return state.duration;\n  });\n  var dispatch = usePlayerStore(function (state) {\n    return state.dispatch;\n  });\n  console.log(currentTime, duration);\n\n  function getPercent() {\n    var currentTime = player.currentTime,\n        seekingTime = player.seekingTime,\n        duration = player.duration;\n    var time = seekingTime || currentTime;\n    var percent = time / duration;\n    return percent >= 1 ? 1 : percent;\n  }\n\n  function onPlayerProgress(e) {\n    var player = e.target; // console.log(player.currentTime / player.duration)\n\n    var percent = player.currentTime / player.duration;\n    if (percent) setTest(percent * 100);\n  }\n\n  function onVolumeChange(e) {\n    var player = e.target;\n    console.log(player.volume);\n  }\n\n  function onPlay(e) {\n    var player = e.target;\n    console.log(player.duration);\n  }\n\n  function onPause(e) {\n    var player = e.target;\n    console.log(player.currentTime / player.duration);\n  }\n\n  React.useEffect(function () {\n    if (!player) return;\n    console.log('VOLUME EFFECT');\n    player.volume = volume / 100;\n  }, [player, volume]);\n  React.useEffect(function () {\n    if (!player) return; // subtitles on\n\n    for (var i = 0; i < player.textTracks.length; i++) {\n      player.textTracks[i].mode = 'hidden';\n    }\n\n    player.addEventListener('timeupdate', onPlayerProgress);\n    player.addEventListener('volumechange', onVolumeChange);\n    player.addEventListener('pause', onPause);\n    player.addEventListener('play', onPlay);\n    return function () {\n      player.removeEventListener('timeupdate', onPlayerProgress);\n      player.removeEventListener('volumechange', onVolumeChange);\n      player.removeEventListener('pause', onPause);\n      player.removeEventListener('play', onPlay);\n    };\n  }, [player]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'start',\n      maxWidth: '600px'\n    },\n    children: [/*#__PURE__*/_jsx(Captions, {}), /*#__PURE__*/_jsx(ReactSlider, {\n      max: duration,\n      value: currentTime,\n      className: \"horizontal-slider\",\n      thumbClassName: \"example-thumb\",\n      trackClassName: \"example-track\",\n      onAfterChange: function onAfterChange(value) {\n        dispatch({\n          type: 'TIME_CHANGE',\n          currentTime: value\n        });\n        player.currentTime = value;\n      },\n      onChange: function onChange(value) {\n        dispatch({\n          type: 'TIME_CHANGE',\n          currentTime: value\n        });\n        player.currentTime = value;\n      },\n      renderThumb: function renderThumb(props, state) {\n        return /*#__PURE__*/_jsx(\"div\", _objectSpread(_objectSpread({}, props), {}, {\n          children: formatTime(state.valueNow)\n        }));\n      }\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return player.play();\n      },\n      children: \"play\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return player.pause();\n      },\n      children: \"pause\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return fullscreenElemRef.current.requestFullscreen();\n      },\n      children: \"full screen\"\n    }), /*#__PURE__*/_jsx(VolumeSlider, {\n      initialVolume: volume,\n      onVolumeChange: function onVolumeChange(volume) {\n        console.log(volume);\n        setVolume(volume);\n      }\n    })]\n  });\n};\n\nexport default Controls; // onPause,\n// onEnded,\n// onError,\n// onPlayerProgress,*\n// onSubtitleChange,\n// onVideoQualityChanged,\n// onMuted,\n// onViewModeChanged,\n// volumechanged*\n// stallstarted\n// stallended\n// unmuted\n// mute\n// onPlay\n// onReady\n// play\n// pause\n// isFullscreen\n// stop\n// seekTo\n// getCurrentTime\n// setVolume\n// setPlaybackRate\n// getDuration\n// getFractionPlayed\n// getFractionLoaded\n// getTimeToSeekSeconds\n//","map":null,"metadata":{},"sourceType":"module"}